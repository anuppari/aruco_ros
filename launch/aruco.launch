<launch>
  <arg name="cameraName" default="/camera" />
  <arg name="markerSize" default="0.2032" />
  <arg name="drawMarkers" default="true" />
  <arg name="adaptiveROI" default="false" />
  <arg name="image_frame_id" default="image" />
  <arg name="view" default="true" />
  
  <!-- Launch AR tag tracking node -->
  <node name="aruco" pkg="aruco_ros" type="aruco_ros_node" output="screen">
    <param name="camera" value="$(arg cameraName)" /> <!-- prefix for image_raw and camera_info topics -->
    <param name="markerSize" value="$(arg markerSize)" /> <!-- length of marker, in meters -->
    <param name="drawMarkers" value="$(arg drawMarkers)" /> <!-- publish image with markers highlighted if true -->
    <param name="adaptiveROI" value="$(arg adaptiveROI)" /> <!-- adaptive ROI to increase frame rate -->
    <param name="image_frame_id" value="$(arg image_frame_id)" /> <!-- tf frame_id of image. Used as parent for publishing marker tf -->
    
    <!-- aruco parameters -->
    <param name="adaptiveThreshWinSizeMin" value="3" />
    <param name="adaptiveThreshWinSizeMax" value="23" />
    <param name="adaptiveThreshWinSizeStep" value="10" />
    <param name="adaptiveThreshConstant" value="7" />
    <param name="minMarkerPerimeterRate" value="0.03" />
    <param name="maxMarkerPerimeterRate" value="4.0" />
    <param name="polygonalApproxAccuracyRate" value="0.05" />
    <param name="minCornerDistanceRate" value="0.05" />
    <param name="minDistanceToBorder" value="2" />
    <param name="minMarkerDistanceRate" value="0.05" />
    <param name="doCornerRefinement" value="true" />
    <param name="cornerRefinementWinSize" value="5" />
    <param name="cornerRefinementMaxIterations" value="30" />
    <param name="cornerRefinementMinAccuracy" value="0.1" />
    <param name="markerBorderBits" value="1" />
    <param name="perspectiveRemovePixelPerCell" value="10" />
    <param name="perspectiveRemoveIgnoredMarginPerCell" value="0.13" />
    <param name="maxErroneousBitsInBorderRate" value="0.35" />
    <param name="minOtsuStdDev" value="5.0" />
    <param name="errorCorrectionRate" value="0.6" />
  </node>
  
  <node if="$(arg view)" name="image_view" pkg="image_view" type="image_view">
    <remap from="image" to="markerImage" />
  </node>
  
</launch>
